<div class="menu-container">
  <!-- HEADER -->
  <header class="menu-header">
    <h1>Menüplan</h1>
  </header>

  <!-- SUCHFELD -->
  <div class="search-controls">
    <div class="search-field">
      <input 
        type="text" 
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        placeholder="Nach Gerichten suchen..."
        class="search-input"
      />
      <button *ngIf="searchTerm" (click)="clearSearch()" class="clear-search" title="Suche löschen">
        ✕
      </button>
    </div>
    
    <div class="search-info" *ngIf="searchTerm">
      <span>{{ filteredItems.length }} von {{ menuItems.length }} Gerichten gefunden</span>
    </div>
  </div>

  <!-- FILTER -->
  <div class="filter-container">
    <div class="filter-group">
      <span>Kategorie:</span>
      @for (category of categories; track category) {
        <button 
          class="filter-btn"
          [class.active]="activeCategory === category"
          (click)="activeCategory = category">
          {{ category }}
        </button>
      }
    </div>

    <div class="filter-group">
      <span>Filter:</span>
      @for (filter of filters; track filter) {
        <button 
          class="filter-btn"
          [class.active]="activeFilter === filter"
          (click)="activeFilter = filter">
          {{ filter }}
        </button>
      }
    </div>
  </div>

  <!-- MENÜ ITEMS -->
  <main class="menu-items">
    @for (item of filteredItems; track item.id) {
      <app-menu-item 
        [item]="item"
        (addItem)="addToOrder(item, $event)">
      </app-menu-item>
    }
    
    <!-- Hinweis wenn keine Gerichte gefunden wurden -->
    <div *ngIf="filteredItems.length === 0" class="no-results">
      <p *ngIf="searchTerm">Keine Gerichte mit "{{ searchTerm }}" gefunden.</p>
      <p *ngIf="!searchTerm && menuItems.length === 0">Keine Gerichte vorhanden.</p>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="menu-footer">
    <div class="footer-grid">
      <div class="footer-item">
        <i class="icon-wallet"></i>
        <div class="footer-text">
          <span>Guthaben</span>
          <strong>{{ balance | currency: 'EUR' }}</strong>
        </div>
      </div>

      <div class="footer-item">
        <i class="icon-receipt"></i>
        <div class="footer-text">
          <span>Summe</span>
          <strong>{{ totalCost | currency: 'EUR' }}</strong>
        </div>
      </div>

      <button class="checkout-btn"
              (click)="navigateToCart()"
              [disabled]="cartItemCount === 0"
              [class.pulse]="cartItemCount > 0">
        <i class="icon-shopping-cart"></i>
        <span>Bestellen</span>
        <div class="badge">{{ cartItemCount }}</div>
      </button>
    </div>
  </footer>
</div>