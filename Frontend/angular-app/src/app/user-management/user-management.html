<div class="user-management-container">
  <header class="menu-header">
    <h1>Benutzerverwaltung</h1>
  </header>
  <div class="search-controls">
    <div class="search-field">
      <input 
        type="text" 
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        placeholder="Nach Namen suchen..."
        class="search-input"
      />
      <button *ngIf="searchTerm" (click)="clearSearch()" class="clear-search" title="Suche löschen">
        ✕
      </button>
    </div>
    
    <div class="search-info" *ngIf="searchTerm">
      <span>{{ filteredUsers.length }} von {{ users.length }} Benutzern gefunden</span>
    </div>
  </div>

  <div class="pagination-controls">
    <label>
      Benutzer pro Seite:
      <select [(ngModel)]="usersPerPage" (change)="changeUsersPerPage(usersPerPage)">
        <option *ngFor="let count of [5, 10, 20, 50]" [value]="count">{{ count }}</option>
      </select>
    </label>

    <div class="paginator">
      <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">‹</button>
      <button 
        *ngFor="let page of pages" 
        (click)="changePage(page)" 
        [class.active]="page === currentPage">
        {{ page }}
      </button>
      <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">›</button>
    </div>
  </div>

  <main class="user-list">
    <app-user-items
      *ngFor="let user of paginatedUsers"
      [user]="user"
      (delete)="deleteUser($event)"
      (block)="blockUser($event)">
    </app-user-items>
    
    
    <div *ngIf="filteredUsers.length === 0" class="no-results">
      <p *ngIf="searchTerm">Keine Benutzer mit "{{ searchTerm }}" gefunden.</p>
      <p *ngIf="!searchTerm">Keine Benutzer vorhanden.</p>
    </div>
  </main>
</div>