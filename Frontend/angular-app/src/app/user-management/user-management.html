<div class="user-management-container">

  <div class="search-controls">
    <div class="search-field">
      <input 
        type="text" 
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        placeholder="Nach Namen suchen..."
        class="search-input"
      />
      <button *ngIf="searchTerm" (click)="clearSearch()" class="clear-search" title="Suche löschen">
        ✕
      </button>
    </div>
    
    <div class="search-info" *ngIf="searchTerm">
      <span>{{ filteredUsers.length }} von {{ users.length }} Benutzern gefunden</span>
    </div>
  </div>

  <div class="pagination-controls">
    <label>
      Benutzer pro Seite:
      <select [(ngModel)]="usersPerPage" (change)="changeUsersPerPage(usersPerPage)">
        <option *ngFor="let count of [5, 10, 20, 50]" [value]="count">{{ count }}</option>
      </select>
    </label>

    <div class="paginator">
      <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">‹</button>
      <button 
        *ngFor="let page of pages" 
        (click)="changePage(page)" 
        [class.active]="page === currentPage">
        {{ page }}
      </button>
      <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">›</button>
    </div>
  </div>

  <main class="user-list">
    <app-user-items
      *ngFor="let user of paginatedUsers"
      [user]="user"
      (delete)="deleteUser($event)"
      (block)="blockUser($event)">
    </app-user-items>
    
    
    <div *ngIf="filteredUsers.length === 0" class="no-results">
      <p *ngIf="searchTerm">Keine Benutzer mit "{{ searchTerm }}" gefunden.</p>
      <p *ngIf="!searchTerm">Keine Benutzer vorhanden.</p>
    </div>
  </main>

  <footer class="menu-footer">
    <div class="impressum-desktop">
      <span>Firma Muster GmbH</span>
      <span>Musterstraße 1, 12345 Musterstadt</span>
      <span>Tel: 01234 / 567890</span>
      <span>E-Mail: info@musterfirma.de</span>
    </div>
    <div class="impressum-mobile">
      <button class="impressum-btn" (click)="showImpressumPopup = true">Impressum</button>
    </div>

    <div class="impressum-popup-overlay" *ngIf="showImpressumPopup" (click)="showImpressumPopup = false">
      <div class="impressum-popup" (click)="$event.stopPropagation()">
        <h2>Impressum</h2>
        <div class="impressum-details">
          <p><strong>Firma Muster GmbH</strong></p>
          <p>Musterstraße 1, 12345 Musterstadt</p>
          <p>Tel: 01234 / 567890</p>
          <p>E-Mail: info@musterfirma.de</p>
        </div>
        <button class="close-btn" (click)="showImpressumPopup = false">Schließen</button>
      </div>
    </div>
  </footer>

</div>